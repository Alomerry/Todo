(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13ee1907"],{"2ca0":function(e,r,t){"use strict";var o=t("23e7"),a=t("06cf").f,s=t("50c4"),n=t("5a34"),i=t("1d80"),l=t("ab13"),c=t("c430"),m="".startsWith,u=Math.min,g=l("startsWith"),p=!c&&!g&&!!function(){var e=a(String.prototype,"startsWith");return e&&!e.writable}();o({target:"String",proto:!0,forced:!p&&!g},{startsWith:function(e){var r=String(i(this));n(e);var t=s(u(arguments.length>1?arguments[1]:void 0,r.length)),o=String(e);return m?m.call(r,o,t):r.slice(t,t+o.length)===o}})},"44e7":function(e,r,t){var o=t("861d"),a=t("c6b6"),s=t("b622"),n=s("match");e.exports=function(e){var r;return o(e)&&(void 0!==(r=e[n])?!!r:"RegExp"==a(e))}},"5a34":function(e,r,t){var o=t("44e7");e.exports=function(e){if(o(e))throw TypeError("The method doesn't accept regular expressions");return e}},a55b:function(e,r,t){"use strict";t.r(r);var o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("a-row",{staticClass:"login-form"},[t("a-col",{attrs:{span:"10",offset:"7"}},[t("a-form-model",e._b({ref:"loginForm",attrs:{model:e.loginForm,rules:e.loginRules}},"a-form-model",e.layout,!1),[t("a-form-model-item",{attrs:{"has-feedback":"",label:"Name",prop:"name"}},[t("a-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.loginForm.name,callback:function(r){e.$set(e.loginForm,"name",r)},expression:"loginForm.name"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"Password",prop:"password"}},[t("a-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.loginForm.password,callback:function(r){e.$set(e.loginForm,"password",r)},expression:"loginForm.password"}})],1),t("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[t("a-button",{attrs:{type:"primary",loading:e.isLogining},on:{click:function(r){return e.submitForm("loginForm")}}},[e._v(" Submit ")]),t("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(r){return e.resetForm("loginForm")}}},[e._v(" Reset ")])],1),t("a",{on:{click:function(r){e.canRegister=!0}}},[e._v(" Don't have an account? Sign up now! ")])],1)],1)],1),t("div",[t("a-modal",{attrs:{title:"Register",footer:null},model:{value:e.canRegister,callback:function(r){e.canRegister=r},expression:"canRegister"}},[t("a-form-model",e._b({ref:"registerForm",attrs:{model:e.registerForm,rules:e.registerRules}},"a-form-model",e.layout,!1),[t("a-form-model-item",{attrs:{"has-feedback":"",label:"Name",prop:"name"}},[t("a-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.registerForm.name,callback:function(r){e.$set(e.registerForm,"name",r)},expression:"registerForm.name"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"Password",prop:"password"}},[t("a-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.registerForm.password,callback:function(r){e.$set(e.registerForm,"password",r)},expression:"registerForm.password"}})],1),t("a-form-model-item",{attrs:{"has-feedback":"",label:"Repeat",prop:"repeatPassword"}},[t("a-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.registerForm.repeatPassword,callback:function(r){e.$set(e.registerForm,"repeatPassword",r)},expression:"registerForm.repeatPassword"}})],1),t("a-form-model-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[t("a-button",{attrs:{type:"primary",loading:e.isRegistering},on:{click:function(r){return e.submitForm("registerForm")}}},[e._v(" Submit ")]),t("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(r){return e.resetForm("registerForm")}}},[e._v(" Reset ")])],1)],1)],1)],1)],1)},a=[],s=(t("b0c0"),t("d3b7"),t("2ca0"),t("202f"),t("8fa9")),n={name:"Login",data:function(){var e=this,r=function(r,t,o){""===t?o(new Error("Please input the username")):e.registerForm.name.length<6?o(new Error("Please input more than 6 characters")):e.registerForm.name.length>12?o(new Error("Please input less than 12 characters")):o()},t=function(r,t,o){""===t?o(new Error("Please input the password again")):e.registerForm.repeatPassword!==e.registerForm.password?o(new Error("Two inputs don't match!")):o()},o=function(r,t,o){""===t?o(new Error("Please input the username")):e.loginForm.name.length<6?o(new Error("Please input more than 6 characters")):e.loginForm.name.length>12?(o(new Error("Please input less than 12 characters")),e.$refs.user.validateField("password")):o()},a=function(r,t,o){""===t?o(new Error("Please input the password")):e.loginForm.password.length<6?o(new Error("Please input more than 6 characters")):e.loginForm.password.length>18?o(new Error("Please input less than 18 characters")):o()};return{isLogining:!1,isRegistering:!1,canRegister:!1,loginForm:{name:"",password:""},loginRules:{name:[{validator:o,trigger:"change"}],password:[{validator:a,trigger:"change"}]},registerForm:{name:"",password:"",repeatPassword:""},registerRules:{name:[{validator:r,trigger:"change"}],password:[{validator:t,trigger:"change"}],repeatPassword:[{validator:t,trigger:"change"}]},layout:{labelCol:{span:4},wrapperCol:{span:14}}}},methods:{submitForm:function(e){var r=this;this.$refs[e].validate((function(t){if(!t)return console.log("error submit!!"),!1;e.startsWith("login")?r.login(r.loginForm.name,r.loginForm.password):e.startsWith("register")&&r.register(r.registerForm.name,r.registerForm.password,r.registerForm.repeatPassword)}))},resetForm:function(e){this.$refs[e].resetFields()},login:function(e,r){var t=this;this.isLogining=!0,s["a"].login(e,r).then((function(e){t.$message.success("Login success!"),console.log(e.data),t.$store.dispatch("login",{id:e.data.id,name:e.data.name,accessToken:e.data.accessToken}),setTimeout((function(){window.location="/todos"}),300)}),(function(e){t.$message.error(e.response.data)})).catch((function(e){console.log(e)})).finally((function(){t.isLogining=!1}))},register:function(e,r,t){var o=this;this.isRegistering=!0,s["a"].register(e,r,t).then((function(e){o.$message.success("Register success!"),console.log(e.data)}),(function(e){o.$message.error(e.response.data)})).catch((function(e){console.log(e)})).finally((function(){o.isRegistering=!1,o.canRegister=!1}))}},mounted:function(){}},i=n,l=t("2877"),c=Object(l["a"])(i,o,a,!1,null,"6e088394",null);r["default"]=c.exports},ab13:function(e,r,t){var o=t("b622"),a=o("match");e.exports=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{return r[a]=!1,"/./"[e](r)}catch(o){}}return!1}},b0c0:function(e,r,t){var o=t("83ab"),a=t("9bf2").f,s=Function.prototype,n=s.toString,i=/^\s*function ([^ (]*)/,l="name";o&&!(l in s)&&a(s,l,{configurable:!0,get:function(){try{return n.call(this).match(i)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-13ee1907.b58c8955.js.map